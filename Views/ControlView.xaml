<UserControl
    x:Class="DBF.Views.ControlView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Notification="clr-namespace:Syncfusion.Windows.Controls.Notification;assembly=Syncfusion.SfBusyIndicator.WPF"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:interactivity="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:DBF.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    
    mc:Ignorable="d">

    <UserControl.Resources>

        <DataTemplate x:Key="NamesViewTemplate">
            <Grid
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                ScrollViewer.VerticalScrollBarVisibility="Disabled">
                <Label
                    Height="26"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Content="{Binding Data.Names}" />
            </Grid>
        </DataTemplate>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Label Grid.Column="0" Grid.Row="0"
            FontWeight="Bold">
            Klub:
        </Label>

        <WrapPanel Grid.Column="1" Grid.Row="0">
            <ComboBox Name="cmbClub"
                Width="Auto"
                MinWidth="100"
                HorizontalAlignment="Left"
                ItemsSource="{Binding Clubs}"
                SelectedItem="{Binding SelectedClub, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <Label Grid.Column="0" Grid.Row="0"
                FontWeight="Bold">
                Dato:
            </Label>

            <ComboBox Name="cmbDate" Grid.Column="1" Grid.Row="0"
                Width="Auto"
                MinWidth="100"
                HorizontalAlignment="Left"
                ItemsSource="{Binding SpilleDage}"
                SelectedItem="{Binding SpilleDag, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </WrapPanel>

        <TabControl Grid.ColumnSpan="2" Grid.Row="1"
            MinHeight="400">
            <TabItem Header="Test">
                <Viewbox>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <WrapPanel Grid.Row="0" Grid.ColumnSpan="2" >
                            <Button
                                Width="70"
                                Margin="5,0"
                                cal:Message.Attach="[Event Click] = [Action AddTimer]"
                                IsEnabled="{Binding Configuration.TimersCanBeAdded, UpdateSourceTrigger=PropertyChanged}"
                                Content="Tilføj ur" />
                            <Button
                                Width="70"
                                Margin="5,0"
                                cal:Message.Attach="[Event Click] = [Action Help]"
                                Content="Hjælp" />
                        </WrapPanel>
                        
                        <local:BridgeTimerControl x:Name="timer1" Grid.Column="0" Grid.Row="1"
                            Setting="{Binding TimerSettings[0],UpdateSourceTrigger=PropertyChanged}" />

                        <local:BridgeTimerControl x:Name="timer2" Grid.Column="1" Grid.Row="1"
                            Setting="{Binding TimerSettings[1],UpdateSourceTrigger=PropertyChanged}" />

                        <local:BridgeTimerControl x:Name="timer3" Grid.Column="0" Grid.Row="2"
                            Setting="{Binding TimerSettings[2],UpdateSourceTrigger=PropertyChanged}" />

                        <local:BridgeTimerControl x:Name="timer4" Grid.Column="1" Grid.Row="2"
                            Setting="{Binding TimerSettings[3],UpdateSourceTrigger=PropertyChanged}" />

                    </Grid>
                </Viewbox>
            </TabItem>

            <TabItem Header="Par - Startliste">
                <!--<Viewbox VerticalAlignment="Top">-->
                <syncfusion:SfDataGrid Name="dgStart"
                    Padding="5,0,5,0"
                    AllowEditing="False"
                    AllowResizingColumns="True"
                    AllowTriStateSorting="False"
                    AlternatingRowStyle="{StaticResource alternatingRowStyle}"
                    AlternationCount="2"
                    AutoExpandGroups="True"
                    AutoGenerateColumns="False"
                    CaptionSummaryRowStyle="{StaticResource captionRowStyle}"
                    ColumnSizer="Auto"
                    FilterRowPosition="None"
                    FontSize="14"
                    GroupCaptionTextFormat=" {Key} Rækken"
                    ItemsSource="{Binding Pairs}"
                    ScrollViewer.CanContentScroll="True">

                    <syncfusion:SfDataGrid.Columns>
                        <syncfusion:GridTextColumn
                            HeaderText="Rk"
                            IsHidden="True"
                            MappingName="Group" />

                        <syncfusion:GridTextColumn
                            HeaderText="Nr"
                            MappingName="PairNo"
                            TextAlignment="Center" />

                        <syncfusion:GridTextColumn
                            Width="300"
                            AllowSorting="False"
                            HeaderText="Navne"
                            MappingName="PairName" />

                        <syncfusion:GridTextColumn
                            HeaderText="Start"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="StartPos"
                            TextAlignment="Center" />

                        <syncfusion:GridNumericColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="AvgHAC" />

                        <syncfusion:GridPercentColumn
                            HeaderText="Forventet"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="ExpectedScore" />

                        <syncfusion:GridTextColumn
                            HeaderText="Rank."
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="TournamentRank"
                            TextAlignment="Center" />

                        <syncfusion:GridNumericColumn
                            HeaderText="Score"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="TournamentResult" />

                        <syncfusion:GridNumericColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="HACTotal" />

                    </syncfusion:SfDataGrid.Columns>

                    <syncfusion:SfDataGrid.StackedHeaderRows>
                        <syncfusion:StackedHeaderRow>
                            <syncfusion:StackedHeaderRow.StackedColumns>
                                <syncfusion:StackedColumn ChildColumns="SectionRank,HACRankSection" HeaderText="Placering" />
                                <syncfusion:StackedColumn ChildColumns="Result,DeltaHAC,MP" HeaderText="Resultat" />
                                <syncfusion:StackedColumn ChildColumns="TournamentRank,TournamentResult,HACTotal" HeaderText="Turneringen" />
                            </syncfusion:StackedHeaderRow.StackedColumns>
                        </syncfusion:StackedHeaderRow>
                    </syncfusion:SfDataGrid.StackedHeaderRows>

                    <syncfusion:SfDataGrid.SortColumnDescriptions>
                        <syncfusion:SortColumnDescription ColumnName="Group" SortDirection="Ascending" />
                        <syncfusion:SortColumnDescription ColumnName="PairNo" SortDirection="Ascending" />
                    </syncfusion:SfDataGrid.SortColumnDescriptions>

                    <syncfusion:SfDataGrid.GroupColumnDescriptions>
                        <syncfusion:GroupColumnDescription ColumnName="Group" SortGroupRecords="True" />
                    </syncfusion:SfDataGrid.GroupColumnDescriptions>

                </syncfusion:SfDataGrid>
                <!--</Viewbox>-->
            </TabItem>

            <TabItem Header="Hold - Startliste">
                <syncfusion:SfDataGrid Name="dgStartTeams"
                    AllowEditing="False"
                    AllowResizingColumns="True"
                    AllowTriStateSorting="False"
                    AlternatingRowStyle="{StaticResource alternatingRowStyle}"
                    AlternationCount="2"
                    AutoExpandGroups="True"
                    AutoGenerateColumns="False"
                    AutoGenerateRelations="False"
                    CaptionSummaryRowStyle="{StaticResource captionRowStyle}"
                    ColumnSizer="Auto"
                    FilterRowPosition="None"
                    FontSize="14"
                    GroupCaptionTextFormat=" {Key} Rækken"
                    ItemsSource="{Binding Teams}"
                    RowHeight="34"
                    ScrollViewer.CanContentScroll="True">

                    <!--<interactivity:Interaction.Behaviors>
                        <wpf:DataGridRowHeightBehavior />
                    </interactivity:Interaction.Behaviors>-->

                    <!--<syncfusion:SfDataGrid.DetailsViewDefinition>
                        <syncfusion:TemplateViewDefinition RowTemplate="{StaticResource NamesViewTemplate}" />
                    </syncfusion:SfDataGrid.DetailsViewDefinition>-->

                    <!--<syncfusion:SfDataGrid.DetailsViewDefinition>
                        <syncfusion:GridViewDefinition RelationalColumn="Players">
                            <syncfusion:GridViewDefinition.DataGrid>
                                <syncfusion:SfDataGrid x:Name="FirstLevelNestedGrid1"
                                    AutoGenerateColumns="False"
                                    HeaderRowHeight="0">
                                    <syncfusion:SfDataGrid.Columns>
                                        <syncfusion:GridTextColumn MappingName="Name" />
                                        <syncfusion:GridTextColumn MappingName="HAC" />
                                    </syncfusion:SfDataGrid.Columns>
                                </syncfusion:SfDataGrid>
                            </syncfusion:GridViewDefinition.DataGrid>
                        </syncfusion:GridViewDefinition>
                    </syncfusion:SfDataGrid.DetailsViewDefinition>-->

                    <syncfusion:SfDataGrid.Columns>
                        <syncfusion:GridTextColumn
                            HeaderText="Rk"
                            IsHidden="True"
                            MappingName="Group" />

                        <syncfusion:GridTextColumn
                            Padding="5,0"
                            HeaderText="Nr"
                            MappingName="TeamNo"
                            TextAlignment="Center" />

                        <syncfusion:GridTextColumn x:Name="Name"
                            Width="250"
                            Padding="5,0"
                            AllowSorting="False"
                            HeaderText="Hold"
                            MappingName="TeamName" />

                        <syncfusion:GridTextColumn
                            Padding="5,0"
                            HeaderText="Start"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="StartPos"
                            MinimumWidth="80"
                            TextAlignment="Center" />

                        <syncfusion:GridNumericColumn
                            Padding="5,0"
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="AvgHAC" />

                        <syncfusion:GridTextColumn
                            Padding="5,0"
                            HeaderText="Spillere"
                            HorizontalHeaderContentAlignment="Left"
                            MappingName="Names"
                            MinimumWidth="1000"
                            TextAlignment="Left" />

                    </syncfusion:SfDataGrid.Columns>

                    <!--<syncfusion:SfDataGrid.StackedHeaderRows>
                        <syncfusion:StackedHeaderRow>
                            <syncfusion:StackedHeaderRow.StackedColumns>
                                <syncfusion:StackedColumn ChildColumns="SectionRank,HACRankSection" HeaderText="Placering" />
                                <syncfusion:StackedColumn ChildColumns="Result,DeltaHAC,MP" HeaderText="Resultat" />
                                <syncfusion:StackedColumn ChildColumns="TournamentRank,TournamentResult,HACTotal" HeaderText="Turneringen" />
                            </syncfusion:StackedHeaderRow.StackedColumns>
                        </syncfusion:StackedHeaderRow>
                    </syncfusion:SfDataGrid.StackedHeaderRows>-->

                    <syncfusion:SfDataGrid.SortColumnDescriptions>
                        <syncfusion:SortColumnDescription ColumnName="Group" SortDirection="Ascending" />
                        <syncfusion:SortColumnDescription ColumnName="TeamNo" SortDirection="Ascending" />
                    </syncfusion:SfDataGrid.SortColumnDescriptions>

                    <syncfusion:SfDataGrid.GroupColumnDescriptions>
                        <syncfusion:GroupColumnDescription ColumnName="Group" SortGroupRecords="True" />
                    </syncfusion:SfDataGrid.GroupColumnDescriptions>

                </syncfusion:SfDataGrid>
            </TabItem>

            <TabItem Header="Bridge Ure">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="108*" />
                        <ColumnDefinition Width="29*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                </Grid>
            </TabItem>

            <TabItem Header="Par Resultater">
                <syncfusion:SfDataGrid Name="dgResult"
                    Padding="5,0,5,0"
                    AllowEditing="False"
                    AllowResizingColumns="True"
                    AllowTriStateSorting="False"
                    AlternatingRowStyle="{StaticResource alternatingRowStyle}"
                    AlternationCount="2"
                    AutoExpandGroups="True"
                    AutoGenerateColumns="False"
                    CaptionSummaryRowStyle="{StaticResource captionRowStyle}"
                    ColumnSizer="Auto"
                    FilterRowPosition="None"
                    FontSize="14"
                    GroupCaptionTextFormat=" {Key} Rækken"
                    ItemsSource="{Binding Pairs}"
                    ScrollViewer.CanContentScroll="True">

                    <syncfusion:SfDataGrid.Columns>

                        <syncfusion:GridTextColumn
                            HeaderText="Rk"
                            IsHidden="True"
                            MappingName="Group" />

                        <syncfusion:GridNumericColumn
                            HeaderText="Nr"
                            MappingName="PairNo"
                            NumberDecimalDigits="0"
                            TextAlignment="Center" />

                        <syncfusion:GridTextColumn
                            Width="300"
                            AllowSorting="False"
                            HeaderText="Navne"
                            MappingName="PairName" />

                        <syncfusion:GridNumericColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="AvgHAC"
                            TextAlignment="Right" />

                        <!--  Placering  -->
                        <syncfusion:GridNumericColumn
                            HeaderText="Sek"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="SectionRank"
                            NumberDecimalDigits="0"
                            TextAlignment="Center" />

                        <syncfusion:GridTextColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="HACRankSection"
                            TextAlignment="Center" />

                        <!--  Sektionens Score  -->
                        <!--<sf:GridNumericColumn HeaderText="Forventet" MappingName="ExpectedScore" />-->
                        <syncfusion:GridPercentColumn
                            HeaderText="Opnået"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="ActualScore" />

                        <syncfusion:GridNumericColumn
                            HeaderText="Score"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="Result"
                            TextAlignment="Right" />

                        <syncfusion:GridNumericColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="DeltaHAC"
                            TextAlignment="Right" />

                        <syncfusion:GridTextColumn
                            Width="40"
                            AllowSorting="False"
                            HeaderText="MP"
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="MP"
                            TextAlignment="Center" />

                        <!--  Tourneringens Score  -->
                        <syncfusion:GridNumericColumn
                            HeaderText="Rank."
                            HorizontalHeaderContentAlignment="Center"
                            MappingName="TournamentRank"
                            NumberDecimalDigits="0"
                            TextAlignment="Center" />

                        <syncfusion:GridNumericColumn
                            HeaderText="Score"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="TournamentResult" />

                        <syncfusion:GridNumericColumn
                            HeaderText="HAC"
                            HorizontalHeaderContentAlignment="Right"
                            MappingName="HACTotal" />
                    </syncfusion:SfDataGrid.Columns>

                    <syncfusion:SfDataGrid.StackedHeaderRows>
                        <syncfusion:StackedHeaderRow>
                            <syncfusion:StackedHeaderRow.StackedColumns>
                                <syncfusion:StackedColumn ChildColumns="SectionRank,HACRankSection" HeaderText="Rangering" />
                                <syncfusion:StackedColumn ChildColumns="ExpectedScore,ActualScore" HeaderText=" %" />
                                <syncfusion:StackedColumn ChildColumns="Result,DeltaHAC,MP" HeaderText="Resultat" />
                                <syncfusion:StackedColumn ChildColumns="TournamentRank,TournamentResult,HACTotal" HeaderText="Turneringen" />
                            </syncfusion:StackedHeaderRow.StackedColumns>
                        </syncfusion:StackedHeaderRow>
                    </syncfusion:SfDataGrid.StackedHeaderRows>

                    <syncfusion:SfDataGrid.SortColumnDescriptions>
                        <syncfusion:SortColumnDescription ColumnName="Group" SortDirection="Ascending" />
                        <syncfusion:SortColumnDescription ColumnName="TournamentRank" SortDirection="Ascending" />
                    </syncfusion:SfDataGrid.SortColumnDescriptions>

                    <syncfusion:SfDataGrid.GroupColumnDescriptions>
                        <syncfusion:GroupColumnDescription ColumnName="Group" />
                    </syncfusion:SfDataGrid.GroupColumnDescriptions>
                </syncfusion:SfDataGrid>
            </TabItem>

        </TabControl>

        <Label Grid.Row="2" FontWeight="Bold">Projektor:</Label>

        <WrapPanel Grid.Column="1" Grid.Row="2"
            Margin="10,0,10,0"
            HorizontalAlignment="Center">
            <Button
                Width="100"
                Margin="5"
                cal:Message.Attach="[Event Click] = [Action ShowStartList]"
                Content="Vis Startliste" />
            <Button
                Width="100"
                Margin="5"
                cal:Message.Attach="[Event Click] = [Action ShowBridgeTimers]"
                Content="Vis Urene" />
            <Button
                Width="100"
                Margin="5"
                cal:Message.Attach="[Event Click] = [Action ShowResults]"
                Content="Vis Resultaterne" />
        </WrapPanel>
    </Grid>

</UserControl>
